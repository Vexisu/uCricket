\chapter{Wymagania i narzędzia}
\label{ch:wymagania-i-narzedzia}

\section{Wymagania projektowe}

Język programowania, będący tematem pracy, musi spełniać szereg założeń, pozwalających na wytwarzanie oprogramowania dla systemów wbudowanych z ograniczoną ilością zasobów pamięciowych i obliczeniowych. Ponadto język ma być zrozumiały dla początkujących programistów poprzez zastosowanie odpowiedniej semantyki i słów kluczowych.

\subsection{Wymagania funkcjonalne}
Spełnienie poniższych wymagań pozwoli na zaprojektowanie języka programowania, którego wykorzystanie będzie możliwe w budowie oprogramowania dla systemów wbudowanych.
\begin{itemize}
\item kompilowalność do kodu maszynowego, specyficznego dla danej platformy,
\item dostęp do sprzętowych zasobów niskiego poziomu np.: adresy bezpośrednie pamięci, wskaźniki, zapis w rejestrach,
\item mechanizmy optymalizacji kodu zmniejszające złożoność pamięciową i obliczeniową programów,
\item ścisłe typowanie poprzez składnię języka i kontrola typów na etapie kompilacji,
\item mechanizmy abstrakcyjne ułatwiające organizacje kodu,
\item możliwość łączenia wielu plików kodu źródłowego z widoczną separacją pochodzenia zmiennych i funkcji,
\item kompletność w sensie Turinga.
\end{itemize}

\subsection{Wymagania niefunkcjonalne}
Głownymi celami, którymi motywowany jest ten projekt są:
\begin{itemize}
\item przyjazność języka programowania dla początkujących programistów,
\item minimalizacja błędów popełnianych przez programistę poprzez niskie skomplikowanie składni,
\item łatwość użycia kompilatora.
\end{itemize}

\subsection{Istniejące rozwiązania}
\ksremark{Wbrew tytułowi w tym podrozdziale nie mamy opisu istniejących rozwiązań.}
Oficjalnie dostępne narzędzia dla mikrokontrolerów AVR, zapewniane przez firmę Microchip, pozwalają na programowanie w językach C, C++ i Assembly. 

\subsection{Język \textmu Cricket}
Język uCricket ma na celu zminimalizowanie popełnianych przez początkujących programistów błędów pojawiających się w trakcie wytwarzania oprogramowania poprzez zapewnienie stosownych mechanizmów prewencji. Jednym z takich mechanizmów jest dużo bardziej ścisła kontrola typów danych. Języki C/C++, w swoim  mechanizmie typowania, traktują wartości numeryczne i logiczne jako jeden typ, który można stosować zamiennie, co może prowadzić do niejasnego zachowania programu. 
Czytelność języka, w porównaniu do oficjalnych rozwiązań, starano się także rozwiązać poprzez dodanie odpowiednich słów kluczowych, definiujących elementy złożone, w formie przedrostków \ksremark{Tego nie rozumiem. Czy to są na pewno przedrostki?}:
\begin{itemize}
\item \lstinline|scope| -- definicja odseparowanej przestrzeni nazw,
\item \lstinline|func| -- definicja funkcji,
\item \lstinline|var| -- definicja zmiennej,
\item \lstinline|ptr| -- definicja wskaźnika.
\end{itemize}
Kod języka uCricket wymaga stosowania przestrzeni nazw, z myślą redukcji powtórzeń i konfliktów nazw, w szczególności przy dołączaniu kolejnych plików źródłowych. Zapewnia to większą elastyczność w nazywaniu elementów oraz ich separację poprzez dodanie warstwy abstrakcji. Użycie przestrzeni nazw nie wpływa na rozmiar kodu wynikowego.


\section{Narzędzia}

Do zaprojektowania i implementacji języka programowania uCricket wykorzystano następujące narzędzia:
\begin{itemize}
\item Java -- język programowania cechujący się obiektowością, czytelną składnią i zaawansowaną kontrolę typów, ułatwia on pracę z wieloma typami dziedziczącymi między sobą;
\item JFlex -- narzędzie generujące kod analizatora leksykalnego w języku Java, pozwala na korzystanie z wyrażeń regularnych, specyfikacja leksykalna definiowana jest w oddzielnym pliku \cytowanie;
\item GNU Bison -- zaawansowane narzędzie generujące kod analizatora składniowego na podstawie specyfikacji gramatycznej. Powszechnie wykorzystywany jako narzędzie pomocniczne w implmementacji kompilatorów. Posiada wsparcie dla języka Java;
\item LLVM -- zestaw bibliotek i narzędzi pozwalających na generowanie kodu pośredniego poprzez udostępnione interfejsy programistyczne. Wspiera wiele platform, m.in: x86, ARM, PowerPC, AVR. Dostarcza także mechanizmy optymalizacji kodu wynikowego \cytowanie;
\item JavaCPP Presets LLVM -- biblioteka-most udostępniająca interfejsy dla biblioteki LLVM języka C poprzez wykorzystanie JNI (Java Native Interface);
\item avr-gcc -- kompilator języka C dla mikrokontrolerów AVR. Stosowany jest jako generator kodu maszynowego dla kodu generowanego przez LLVM;
\item avrdude -- program pozwalający na programowanie mikrokontrolerów AVR;
\item Cutter -- platforma do inżynierii wstecznej pomagająca w analizie wygenerowanego kodu maszynowego. Pracuje w oparciu o Rizin Framework;
\item AVR Simulator -- symulator mikrokontrolera ATmega328P działający w przeglądarce;
\item Arduino Pro Mini -- płytka rozwojowa z mikrokontrolerem ATmega328P;
\item USBasp -- programator mikrokontrolerów AVR.
\end{itemize}

Zestaw tych narzędzi i bibliotek pozwala na projektowanie skompikowanych kompilatorów generujących niskopoziomowy, a także testowanie i weryfikacji poprawności programów napisanych w tworzonym języku programowania.

%\begin{itemize}
%\item wymagania funkcjonalne i niefunkcjonalne
%\item przypadki użycia (diagramy UML) -- dla prac, w których mają zastosowanie
%\item opis narzędzi, metod eksperymentalnych, metod modelowania itp.
%\item metodyka pracy nad projektowaniem i implementacją -- dla prac, w których ma to zastosowanie
%\end{itemize}
%